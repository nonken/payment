<!doctype html>
<html>
	<head>
		<title>Payment test</title>
		<style type="text/css">
			.display-none {
				display: none;
			}
		</style>
	</head>
	<body onload="init()">
		<button id="pay">Pay for this item</button>
		<div id="paid" class="display-none">Thanks!</div>
		<div id="no-access" class="display-none">No access!</div>
	</body>
	<script>
		function init(){
			document.getElementById("pay").addEventListener('click', function(){
				var
					payment = navigator.payment,
					button = document.getElementById('pay'),
					paid = document.getElementById('paid'),
					noAccess = document.getElementById('no-access')
				;

				payment.pay(12.35, "Payment for product", function(err, data){
					console.log(err);
					if (err){
						noAccess.classList.remove('display-none');
						button.classList.add('display-none');
					}else{
						paid.classList.remove('display-none');
						button.classList.add('display-none');
					}
				});
			});
		}
	</script>
</html>
